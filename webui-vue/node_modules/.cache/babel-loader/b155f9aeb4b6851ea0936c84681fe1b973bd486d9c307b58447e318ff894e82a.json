{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport PageTitle from '@/components/Global/PageTitle';\nimport LoadingBarMixin from '@/components/Mixins/LoadingBarMixin';\nimport VuelidateMixin from '@/components/Mixins/VuelidateMixin.js';\nimport { useVuelidate } from '@vuelidate/core';\nimport BVToastMixin from '@/components/Mixins/BVToastMixin';\nimport { useI18n } from 'vue-i18n';\nimport i18n from '@/i18n';\nexport default {\n  name: 'PowerRestorePolicy',\n  components: {\n    PageTitle\n  },\n  mixins: [VuelidateMixin, BVToastMixin, LoadingBarMixin],\n  beforeRouteLeave(to, from, next) {\n    this.hideLoader();\n    next();\n  },\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data() {\n    return {\n      $t: useI18n().t,\n      policyValue: null,\n      options: []\n    };\n  },\n  computed: {\n    powerRestorePolicies() {\n      return this.$store.getters['powerPolicy/powerRestorePolicies'];\n    },\n    currentPowerRestorePolicy: {\n      get() {\n        return this.$store.getters['powerPolicy/powerRestoreCurrentPolicy'];\n      },\n      set(policy) {\n        this.policyValue = policy;\n      }\n    }\n  },\n  created() {\n    this.startLoader();\n    this.renderPowerRestoreSettings();\n  },\n  methods: {\n    renderPowerRestoreSettings() {\n      Promise.all([this.$store.dispatch('powerPolicy/getPowerRestorePolicies'), this.$store.dispatch('powerPolicy/getPowerRestoreCurrentPolicy')]).finally(() => {\n        this.options.length = 0;\n        this.powerRestorePolicies.map(item => {\n          this.options.push({\n            text: i18n.global.t(`pagePowerRestorePolicy.policiesDesc.${item.state}`),\n            value: `${item.state}`\n          });\n        });\n        this.endLoader();\n      });\n    },\n    submitForm() {\n      this.startLoader();\n      this.$store.dispatch('powerPolicy/setPowerRestorePolicy', this.policyValue || this.currentPowerRestorePolicy).then(message => this.successToast(message)).catch(({\n        message\n      }) => this.errorToast(message)).finally(() => {\n        this.renderPowerRestoreSettings();\n      });\n    }\n  }\n};","map":{"version":3,"names":["PageTitle","LoadingBarMixin","VuelidateMixin","useVuelidate","BVToastMixin","useI18n","i18n","name","components","mixins","beforeRouteLeave","to","from","next","hideLoader","setup","v$","data","$t","t","policyValue","options","computed","powerRestorePolicies","$store","getters","currentPowerRestorePolicy","get","set","policy","created","startLoader","renderPowerRestoreSettings","methods","Promise","all","dispatch","finally","length","map","item","push","text","global","state","value","endLoader","submitForm","then","message","successToast","catch","errorToast"],"sources":["/home/zenchenko/openbmc/build/evb-ast2500/workspace/sources/webui-vue/src/views/Settings/PowerRestorePolicy/PowerRestorePolicy.vue"],"sourcesContent":["<template>\n  <b-container fluid=\"xl\">\n    <page-title :description=\"$t('pagePowerRestorePolicy.description')\" />\n\n    <b-row>\n      <b-col sm=\"8\" md=\"6\" xl=\"12\">\n        <b-form-group :label=\"$t('pagePowerRestorePolicy.powerPoliciesLabel')\">\n          <b-form-radio-group\n            v-model=\"currentPowerRestorePolicy\"\n            :options=\"options\"\n            name=\"power-restore-policy\"\n            stacked\n          ></b-form-radio-group>\n        </b-form-group>\n      </b-col>\n    </b-row>\n\n    <b-button variant=\"primary\" type=\"submit\" @click=\"submitForm\">\n      {{ $t('global.action.saveSettings') }}\n    </b-button>\n  </b-container>\n</template>\n\n<script>\nimport PageTitle from '@/components/Global/PageTitle';\nimport LoadingBarMixin from '@/components/Mixins/LoadingBarMixin';\nimport VuelidateMixin from '@/components/Mixins/VuelidateMixin.js';\nimport { useVuelidate } from '@vuelidate/core';\n\nimport BVToastMixin from '@/components/Mixins/BVToastMixin';\nimport { useI18n } from 'vue-i18n';\nimport i18n from '@/i18n';\n\nexport default {\n  name: 'PowerRestorePolicy',\n  components: { PageTitle },\n  mixins: [VuelidateMixin, BVToastMixin, LoadingBarMixin],\n  beforeRouteLeave(to, from, next) {\n    this.hideLoader();\n    next();\n  },\n  setup() {\n    return {\n      v$: useVuelidate(),\n    };\n  },\n  data() {\n    return {\n      $t: useI18n().t,\n      policyValue: null,\n      options: [],\n    };\n  },\n  computed: {\n    powerRestorePolicies() {\n      return this.$store.getters['powerPolicy/powerRestorePolicies'];\n    },\n    currentPowerRestorePolicy: {\n      get() {\n        return this.$store.getters['powerPolicy/powerRestoreCurrentPolicy'];\n      },\n      set(policy) {\n        this.policyValue = policy;\n      },\n    },\n  },\n  created() {\n    this.startLoader();\n    this.renderPowerRestoreSettings();\n  },\n  methods: {\n    renderPowerRestoreSettings() {\n      Promise.all([\n        this.$store.dispatch('powerPolicy/getPowerRestorePolicies'),\n        this.$store.dispatch('powerPolicy/getPowerRestoreCurrentPolicy'),\n      ]).finally(() => {\n        this.options.length = 0;\n        this.powerRestorePolicies.map((item) => {\n          this.options.push({\n            text: i18n.global.t(\n              `pagePowerRestorePolicy.policiesDesc.${item.state}`,\n            ),\n            value: `${item.state}`,\n          });\n        });\n        this.endLoader();\n      });\n    },\n    submitForm() {\n      this.startLoader();\n      this.$store\n        .dispatch(\n          'powerPolicy/setPowerRestorePolicy',\n          this.policyValue || this.currentPowerRestorePolicy,\n        )\n        .then((message) => this.successToast(message))\n        .catch(({ message }) => this.errorToast(message))\n        .finally(() => {\n          this.renderPowerRestoreSettings();\n        });\n    },\n  },\n};\n</script>\n"],"mappings":";AAwBA,OAAOA,SAAQ,MAAO,+BAA+B;AACrD,OAAOC,eAAc,MAAO,qCAAqC;AACjE,OAAOC,cAAa,MAAO,uCAAuC;AAClE,SAASC,YAAW,QAAS,iBAAiB;AAE9C,OAAOC,YAAW,MAAO,kCAAkC;AAC3D,SAASC,OAAM,QAAS,UAAU;AAClC,OAAOC,IAAG,MAAO,QAAQ;AAEzB,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAC1BC,UAAU,EAAE;IAAER;EAAU,CAAC;EACzBS,MAAM,EAAE,CAACP,cAAc,EAAEE,YAAY,EAAEH,eAAe,CAAC;EACvDS,gBAAgBA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAC/B,IAAI,CAACC,UAAU,CAAC,CAAC;IACjBD,IAAI,CAAC,CAAC;EACR,CAAC;EACDE,KAAKA,CAAA,EAAG;IACN,OAAO;MACLC,EAAE,EAAEb,YAAY,CAAC;IACnB,CAAC;EACH,CAAC;EACDc,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,EAAE,EAAEb,OAAO,CAAC,CAAC,CAACc,CAAC;MACfC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,oBAAoBA,CAAA,EAAG;MACrB,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,kCAAkC,CAAC;IAChE,CAAC;IACDC,yBAAyB,EAAE;MACzBC,GAAGA,CAAA,EAAG;QACJ,OAAO,IAAI,CAACH,MAAM,CAACC,OAAO,CAAC,uCAAuC,CAAC;MACrE,CAAC;MACDG,GAAGA,CAACC,MAAM,EAAE;QACV,IAAI,CAACT,WAAU,GAAIS,MAAM;MAC3B;IACF;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,WAAW,CAAC,CAAC;IAClB,IAAI,CAACC,0BAA0B,CAAC,CAAC;EACnC,CAAC;EACDC,OAAO,EAAE;IACPD,0BAA0BA,CAAA,EAAG;MAC3BE,OAAO,CAACC,GAAG,CAAC,CACV,IAAI,CAACX,MAAM,CAACY,QAAQ,CAAC,qCAAqC,CAAC,EAC3D,IAAI,CAACZ,MAAM,CAACY,QAAQ,CAAC,0CAA0C,CAAC,CACjE,CAAC,CAACC,OAAO,CAAC,MAAM;QACf,IAAI,CAAChB,OAAO,CAACiB,MAAK,GAAI,CAAC;QACvB,IAAI,CAACf,oBAAoB,CAACgB,GAAG,CAAEC,IAAI,IAAK;UACtC,IAAI,CAACnB,OAAO,CAACoB,IAAI,CAAC;YAChBC,IAAI,EAAEpC,IAAI,CAACqC,MAAM,CAACxB,CAAC,CACjB,uCAAuCqB,IAAI,CAACI,KAAK,EACnD,CAAC;YACDC,KAAK,EAAE,GAAGL,IAAI,CAACI,KAAK;UACtB,CAAC,CAAC;QACJ,CAAC,CAAC;QACF,IAAI,CAACE,SAAS,CAAC,CAAC;MAClB,CAAC,CAAC;IACJ,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAAChB,WAAW,CAAC,CAAC;MAClB,IAAI,CAACP,MAAK,CACPY,QAAQ,CACP,mCAAmC,EACnC,IAAI,CAAChB,WAAU,IAAK,IAAI,CAACM,yBAC3B,EACCsB,IAAI,CAAEC,OAAO,IAAK,IAAI,CAACC,YAAY,CAACD,OAAO,CAAC,EAC5CE,KAAK,CAAC,CAAC;QAAEF;MAAQ,CAAC,KAAK,IAAI,CAACG,UAAU,CAACH,OAAO,CAAC,EAC/CZ,OAAO,CAAC,MAAM;QACb,IAAI,CAACL,0BAA0B,CAAC,CAAC;MACnC,CAAC,CAAC;IACN;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}