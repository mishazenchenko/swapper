{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_page_title = _resolveComponent(\"page-title\");\n  const _component_b_col = _resolveComponent(\"b-col\");\n  const _component_b_row = _resolveComponent(\"b-row\");\n  const _component_b_form_checkbox = _resolveComponent(\"b-form-checkbox\");\n  const _component_b_form_group = _resolveComponent(\"b-form-group\");\n  const _component_b_form_text = _resolveComponent(\"b-form-text\");\n  const _component_b_form_input = _resolveComponent(\"b-form-input\");\n  const _component_b_form_invalid_feedback = _resolveComponent(\"b-form-invalid-feedback\");\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_form = _resolveComponent(\"b-form\");\n  const _component_b_container = _resolveComponent(\"b-container\");\n  return _openBlock(), _createBlock(_component_b_container, {\n    fluid: \"xl\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_page_title, {\n      description: $data.$t('pagePower.description')\n    }, null, 8 /* PROPS */, [\"description\"]), _createVNode(_component_b_row, null, {\n      default: _withCtx(() => [_createVNode(_component_b_col, {\n        sm: \"8\",\n        md: \"6\",\n        xl: \"12\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"dl\", null, [_createElementVNode(\"dt\", null, _toDisplayString($data.$t('pagePower.powerConsumption')), 1 /* TEXT */), _createElementVNode(\"dd\", null, _toDisplayString(_ctx.powerConsumptionValue ? `${_ctx.powerConsumptionValue} W` : $data.$t('global.status.notAvailable')), 1 /* TEXT */)])], undefined, true),\n        _: 1 /* STABLE */\n      })], undefined, true),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_b_form, {\n      onSubmit: _withModifiers($options.submitForm, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_b_form_group, {\n        disabled: $data.loading\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_row, null, {\n          default: _withCtx(() => [_createVNode(_component_b_col, {\n            sm: \"8\",\n            md: \"6\",\n            xl: \"12\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_b_form_group, {\n              label: $data.$t('pagePower.powerCapSettingLabel')\n            }, {\n              default: _withCtx(() => [_createVNode(_component_b_form_checkbox, {\n                modelValue: $options.isPowerCapFieldEnabled,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $options.isPowerCapFieldEnabled = $event),\n                \"data-test-id\": \"power-checkbox-togglePowerCapField\",\n                name: \"power-cap-setting\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString($data.$t('pagePower.powerCapSettingData')), 1 /* TEXT */)], undefined, true),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"modelValue\"])], undefined, true),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"label\"])], undefined, true),\n            _: 1 /* STABLE */\n          })], undefined, true),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_b_row, null, {\n          default: _withCtx(() => [_createVNode(_component_b_col, {\n            sm: \"8\",\n            md: \"6\",\n            xl: \"3\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_b_form_group, {\n              id: \"input-group-1\",\n              label: $data.$t('pagePower.powerCapLabel'),\n              \"label-for\": \"input-1\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_b_form_text, {\n                id: \"power-help-text\"\n              }, {\n                default: _withCtx(() => [_createTextVNode(_toDisplayString($data.$t('pagePower.powerCapLabelTextInfo', {\n                  min: 1,\n                  max: 10000\n                })), 1 /* TEXT */)], undefined, true),\n                _: 1 /* STABLE */\n              }), _createVNode(_component_b_form_input, {\n                id: \"input-1\",\n                modelValue: $options.powerCapValue,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $options.powerCapValue = $event),\n                modelModifiers: {\n                  number: true\n                },\n                disabled: !$options.isPowerCapFieldEnabled,\n                \"data-test-id\": \"power-input-powerCapValue\",\n                type: \"number\",\n                \"aria-describedby\": \"power-help-text\",\n                state: _ctx.getValidationState($setup.v$.powerCapValue)\n              }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\", \"state\"]), _createVNode(_component_b_form_invalid_feedback, {\n                id: \"input-live-feedback\",\n                role: \"alert\"\n              }, {\n                default: _withCtx(() => [$setup.v$.powerCapValue.required.$invalid ? (_openBlock(), _createElementBlock(_Fragment, {\n                  key: 0\n                }, [_createTextVNode(_toDisplayString($data.$t('global.form.fieldRequired')), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : $setup.v$.powerCapValue.between.$invalid ? (_openBlock(), _createElementBlock(_Fragment, {\n                  key: 1\n                }, [_createTextVNode(_toDisplayString($data.$t('global.form.invalidValue')), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)], undefined, true),\n                _: 1 /* STABLE */\n              })], undefined, true),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"label\"])], undefined, true),\n            _: 1 /* STABLE */\n          })], undefined, true),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_b_button, {\n          variant: \"primary\",\n          type: \"submit\",\n          \"data-test-id\": \"power-button-savePowerCapValue\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString($data.$t('global.action.save')), 1 /* TEXT */)], undefined, true),\n          _: 1 /* STABLE */\n        })], undefined, true),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"disabled\"])], undefined, true),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onSubmit\"])], undefined, true),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_b_container","fluid","default","_withCtx","_createVNode","_component_page_title","description","$data","$t","_component_b_row","_component_b_col","sm","md","xl","_createElementVNode","_toDisplayString","_ctx","powerConsumptionValue","_","_component_b_form","onSubmit","_withModifiers","$options","submitForm","_component_b_form_group","disabled","loading","label","_component_b_form_checkbox","modelValue","isPowerCapFieldEnabled","_cache","$event","name","_createTextVNode","id","_component_b_form_text","_component_b_form_input","powerCapValue","modelModifiers","number","type","state","getValidationState","$setup","v$","_component_b_form_invalid_feedback","role","required","$invalid","_createElementBlock","_Fragment","key","between","_createCommentVNode","_component_b_button","variant"],"sources":["/home/zenchenko/openbmc/build/evb-ast2500/workspace/sources/webui-vue/src/views/ResourceManagement/Power.vue"],"sourcesContent":["<template>\n  <b-container fluid=\"xl\">\n    <page-title :description=\"$t('pagePower.description')\" />\n\n    <b-row>\n      <b-col sm=\"8\" md=\"6\" xl=\"12\">\n        <dl>\n          <dt>{{ $t('pagePower.powerConsumption') }}</dt>\n          <dd>\n            {{\n              powerConsumptionValue\n                ? `${powerConsumptionValue} W`\n                : $t('global.status.notAvailable')\n            }}\n          </dd>\n        </dl>\n      </b-col>\n    </b-row>\n\n    <b-form @submit.prevent=\"submitForm\">\n      <b-form-group :disabled=\"loading\">\n        <b-row>\n          <b-col sm=\"8\" md=\"6\" xl=\"12\">\n            <b-form-group :label=\"$t('pagePower.powerCapSettingLabel')\">\n              <b-form-checkbox\n                v-model=\"isPowerCapFieldEnabled\"\n                data-test-id=\"power-checkbox-togglePowerCapField\"\n                name=\"power-cap-setting\"\n              >\n                {{ $t('pagePower.powerCapSettingData') }}\n              </b-form-checkbox>\n            </b-form-group>\n          </b-col>\n        </b-row>\n\n        <b-row>\n          <b-col sm=\"8\" md=\"6\" xl=\"3\">\n            <b-form-group\n              id=\"input-group-1\"\n              :label=\"$t('pagePower.powerCapLabel')\"\n              label-for=\"input-1\"\n            >\n              <b-form-text id=\"power-help-text\">\n                {{\n                  $t('pagePower.powerCapLabelTextInfo', {\n                    min: 1,\n                    max: 10000,\n                  })\n                }}\n              </b-form-text>\n\n              <b-form-input\n                id=\"input-1\"\n                v-model.number=\"powerCapValue\"\n                :disabled=\"!isPowerCapFieldEnabled\"\n                data-test-id=\"power-input-powerCapValue\"\n                type=\"number\"\n                aria-describedby=\"power-help-text\"\n                :state=\"getValidationState(v$.powerCapValue)\"\n              ></b-form-input>\n\n              <b-form-invalid-feedback id=\"input-live-feedback\" role=\"alert\">\n                <template v-if=\"v$.powerCapValue.required.$invalid\">\n                  {{ $t('global.form.fieldRequired') }}\n                </template>\n                <template v-else-if=\"v$.powerCapValue.between.$invalid\">\n                  {{ $t('global.form.invalidValue') }}\n                </template>\n              </b-form-invalid-feedback>\n            </b-form-group>\n          </b-col>\n        </b-row>\n\n        <b-button\n          variant=\"primary\"\n          type=\"submit\"\n          data-test-id=\"power-button-savePowerCapValue\"\n        >\n          {{ $t('global.action.save') }}\n        </b-button>\n      </b-form-group>\n    </b-form>\n  </b-container>\n</template>\n\n<script>\nimport PageTitle from '@/components/Global/PageTitle';\nimport LoadingBarMixin, { loading } from '@/components/Mixins/LoadingBarMixin';\nimport VuelidateMixin from '@/components/Mixins/VuelidateMixin.js';\nimport { useVuelidate } from '@vuelidate/core';\n\nimport BVToastMixin from '@/components/Mixins/BVToastMixin';\nimport { requiredIf, between } from '@vuelidate/validators';\nimport { mapGetters } from 'vuex';\nimport { useI18n } from 'vue-i18n';\n\nexport default {\n  name: 'Power',\n  components: { PageTitle },\n  mixins: [VuelidateMixin, BVToastMixin, LoadingBarMixin],\n  beforeRouteLeave(to, from, next) {\n    this.hideLoader();\n    next();\n  },\n  setup() {\n    return {\n      v$: useVuelidate(),\n    };\n  },\n  data() {\n    return {\n      $t: useI18n().t,\n      loading,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      powerConsumptionValue: 'powerControl/powerConsumptionValue',\n    }),\n\n    /**\n      Computed property isPowerCapFieldEnabled is used to enable or disable the input field.\n      The input field is enabled when the powercapValue property is not null.\n   **/\n    isPowerCapFieldEnabled: {\n      get() {\n        return this.powerCapValue !== null;\n      },\n      set(value) {\n        this.v$.$reset();\n        let newValue = null;\n        if (value) {\n          if (this.powerCapValue) {\n            newValue = this.powerCapValue;\n          } else {\n            newValue = '';\n          }\n        }\n        this.$store.dispatch('powerControl/setPowerCapUpdatedValue', newValue);\n      },\n    },\n    powerCapValue: {\n      get() {\n        return this.$store.getters['powerControl/powerCapValue'];\n      },\n      set(value) {\n        this.v$.$touch();\n        this.$store.dispatch('powerControl/setPowerCapUpdatedValue', value);\n      },\n    },\n  },\n  created() {\n    this.startLoader();\n    this.$store\n      .dispatch('powerControl/getPowerControl')\n      .finally(() => this.endLoader());\n  },\n  validations: {\n    powerCapValue: {\n      between: between(1, 10000),\n      required: requiredIf(function () {\n        return this.isPowerCapFieldEnabled;\n      }),\n    },\n  },\n  methods: {\n    submitForm() {\n      this.v$.$touch();\n      if (this.v$.$invalid) return;\n      this.startLoader();\n      this.$store\n        .dispatch('powerControl/setPowerControl', this.powerCapValue)\n        .then((message) => this.successToast(message))\n        .catch(({ message }) => this.errorToast(message))\n        .finally(() => this.endLoader());\n    },\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}