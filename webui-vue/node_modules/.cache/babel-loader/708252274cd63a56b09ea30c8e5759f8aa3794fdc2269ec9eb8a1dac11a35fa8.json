{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_page_title = _resolveComponent(\"page-title\");\n  const _component_b_form_radio_group = _resolveComponent(\"b-form-radio-group\");\n  const _component_b_form_group = _resolveComponent(\"b-form-group\");\n  const _component_b_col = _resolveComponent(\"b-col\");\n  const _component_b_row = _resolveComponent(\"b-row\");\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_container = _resolveComponent(\"b-container\");\n  return _openBlock(), _createBlock(_component_b_container, {\n    fluid: \"xl\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_page_title, {\n      description: $data.$t('pagePowerRestorePolicy.description')\n    }, null, 8 /* PROPS */, [\"description\"]), _createVNode(_component_b_row, null, {\n      default: _withCtx(() => [_createVNode(_component_b_col, {\n        sm: \"8\",\n        md: \"6\",\n        xl: \"12\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_b_form_group, {\n          label: $data.$t('pagePowerRestorePolicy.powerPoliciesLabel')\n        }, {\n          default: _withCtx(() => [_createVNode(_component_b_form_radio_group, {\n            modelValue: $options.currentPowerRestorePolicy,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $options.currentPowerRestorePolicy = $event),\n            options: $data.options,\n            name: \"power-restore-policy\",\n            stacked: \"\"\n          }, null, 8 /* PROPS */, [\"modelValue\", \"options\"])], undefined, true),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"label\"])], undefined, true),\n        _: 1 /* STABLE */\n      })], undefined, true),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_b_button, {\n      variant: \"primary\",\n      type: \"submit\",\n      onClick: $options.submitForm\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($data.$t('global.action.saveSettings')), 1 /* TEXT */)], undefined, true),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])], undefined, true),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_b_container","fluid","default","_withCtx","_createVNode","_component_page_title","description","$data","$t","_component_b_row","_component_b_col","sm","md","xl","_component_b_form_group","label","_component_b_form_radio_group","modelValue","$options","currentPowerRestorePolicy","_cache","$event","options","name","stacked","_","_component_b_button","variant","type","onClick","submitForm","_createTextVNode","_toDisplayString"],"sources":["/home/zenchenko/openbmc/build/evb-ast2500/workspace/sources/webui-vue/src/views/Settings/PowerRestorePolicy/PowerRestorePolicy.vue"],"sourcesContent":["<template>\n  <b-container fluid=\"xl\">\n    <page-title :description=\"$t('pagePowerRestorePolicy.description')\" />\n\n    <b-row>\n      <b-col sm=\"8\" md=\"6\" xl=\"12\">\n        <b-form-group :label=\"$t('pagePowerRestorePolicy.powerPoliciesLabel')\">\n          <b-form-radio-group\n            v-model=\"currentPowerRestorePolicy\"\n            :options=\"options\"\n            name=\"power-restore-policy\"\n            stacked\n          ></b-form-radio-group>\n        </b-form-group>\n      </b-col>\n    </b-row>\n\n    <b-button variant=\"primary\" type=\"submit\" @click=\"submitForm\">\n      {{ $t('global.action.saveSettings') }}\n    </b-button>\n  </b-container>\n</template>\n\n<script>\nimport PageTitle from '@/components/Global/PageTitle';\nimport LoadingBarMixin from '@/components/Mixins/LoadingBarMixin';\nimport VuelidateMixin from '@/components/Mixins/VuelidateMixin.js';\nimport { useVuelidate } from '@vuelidate/core';\n\nimport BVToastMixin from '@/components/Mixins/BVToastMixin';\nimport { useI18n } from 'vue-i18n';\nimport i18n from '@/i18n';\n\nexport default {\n  name: 'PowerRestorePolicy',\n  components: { PageTitle },\n  mixins: [VuelidateMixin, BVToastMixin, LoadingBarMixin],\n  beforeRouteLeave(to, from, next) {\n    this.hideLoader();\n    next();\n  },\n  setup() {\n    return {\n      v$: useVuelidate(),\n    };\n  },\n  data() {\n    return {\n      $t: useI18n().t,\n      policyValue: null,\n      options: [],\n    };\n  },\n  computed: {\n    powerRestorePolicies() {\n      return this.$store.getters['powerPolicy/powerRestorePolicies'];\n    },\n    currentPowerRestorePolicy: {\n      get() {\n        return this.$store.getters['powerPolicy/powerRestoreCurrentPolicy'];\n      },\n      set(policy) {\n        this.policyValue = policy;\n      },\n    },\n  },\n  created() {\n    this.startLoader();\n    this.renderPowerRestoreSettings();\n  },\n  methods: {\n    renderPowerRestoreSettings() {\n      Promise.all([\n        this.$store.dispatch('powerPolicy/getPowerRestorePolicies'),\n        this.$store.dispatch('powerPolicy/getPowerRestoreCurrentPolicy'),\n      ]).finally(() => {\n        this.options.length = 0;\n        this.powerRestorePolicies.map((item) => {\n          this.options.push({\n            text: i18n.global.t(\n              `pagePowerRestorePolicy.policiesDesc.${item.state}`,\n            ),\n            value: `${item.state}`,\n          });\n        });\n        this.endLoader();\n      });\n    },\n    submitForm() {\n      this.startLoader();\n      this.$store\n        .dispatch(\n          'powerPolicy/setPowerRestorePolicy',\n          this.policyValue || this.currentPowerRestorePolicy,\n        )\n        .then((message) => this.successToast(message))\n        .catch(({ message }) => this.errorToast(message))\n        .finally(() => {\n          this.renderPowerRestoreSettings();\n        });\n    },\n  },\n};\n</script>\n"],"mappings":";;;;;;;;;uBACEA,YAAA,CAmBcC,sBAAA;IAnBDC,KAAK,EAAC;EAAI;IADzBC,OAAA,EAAAC,QAAA,CAEI,MAAsE,CAAtEC,YAAA,CAAsEC,qBAAA;MAAzDC,WAAW,EAAEC,KAAA,CAAAC,EAAE;8CAE5BJ,YAAA,CAWQK,gBAAA;MAfZP,OAAA,EAAAC,QAAA,CAKM,MASQ,CATRC,YAAA,CASQM,gBAAA;QATDC,EAAE,EAAC,GAAG;QAACC,EAAE,EAAC,GAAG;QAACC,EAAE,EAAC;;QAL9BX,OAAA,EAAAC,QAAA,CAMQ,MAOe,CAPfC,YAAA,CAOeU,uBAAA;UAPAC,KAAK,EAAER,KAAA,CAAAC,EAAE;;UANhCN,OAAA,EAAAC,QAAA,CAOU,MAKsB,CALtBC,YAAA,CAKsBY,6BAAA;YAZhCC,UAAA,EAQqBC,QAAA,CAAAC,yBAAyB;YAR9C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAQqBH,QAAA,CAAAC,yBAAyB,GAAAE,MAAA;YACjCC,OAAO,EAAEf,KAAA,CAAAe,OAAO;YACjBC,IAAI,EAAC,sBAAsB;YAC3BC,OAAO,EAAP;;UAXZC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAiBIrB,YAAA,CAEWsB,mBAAA;MAFDC,OAAO,EAAC,SAAS;MAACC,IAAI,EAAC,QAAQ;MAAEC,OAAK,EAAEX,QAAA,CAAAY;;MAjBtD5B,OAAA,EAAAC,QAAA,CAkBM,MAAsC,CAlB5C4B,gBAAA,CAAAC,gBAAA,CAkBSzB,KAAA,CAAAC,EAAE,+C;MAlBXiB,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}